{% extends "base.html" %}

{% block title %}Search Results - Patterns Matter{% endblock %}
{% set page_title = "Search Results" %}
{% set page_description = "Search results for '" ~ (query or '') ~ "' on Patterns Matter." %}

{% block content %}
<div class="container">
  <!-- Admin Login/Logout (consistent header) -->
  <div class="admin-link" style="text-align:right; margin-bottom:1em;">
    {% if session.admin %}
      <a href="{{ url_for('logout') }}">Logout</a>
    {% else %}
      <a href="{{ url_for('login') }}">Admin Login</a>
    {% endif %}
  </div>

  <h1>Search Results for "{{ query }}"</h1>

  <h2>Materials Datasets &amp; Results</h2>
  {% if materials and materials|length %}
    <ul>
      {% for property, tab, filename, description in materials %}
        <li>
          <a href="{{ url_for('property_detail', property_name=property, tab=tab) }}">
            {{ property.replace('_',' ').title() }} / {{ tab.title() }}
          </a>
          &mdash; <b>{{ filename }}</b>
          {% if description %}<br><small>{{ description }}</small>{% endif %}
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No materials data found.</p>
  {% endif %}

  <h2>Music &amp; Guitar Clips</h2>
  {% if clips and clips|length %}
    <ul>
      {% for id, filename, title, description in clips %}
        <li>
          <a href="{{ url_for('uploaded_file', filename=filename) }}" target="_blank">{{ title }}</a>
          {% if description %}<br><small>{{ description }}</small>{% endif %}
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No music clips found.</p>
  {% endif %}

  <div style="margin-top:2em;">
    <a href="{{ url_for('public_home') }}">Return to Home</a>
  </div>
</div>
{% endblock %}